# Mood Weaver - Simple Personal Sentiment Journal

Version: 1.0 (Beginner Prototype)

## Project Goal

To build a basic web application where a user can write journal entries and see a simple, automatically calculated "mood score" for each entry. The focus is on understanding the fundamental flow between frontend, database, and a simple backend function using free Firebase services and basic web technologies.

## Technology Stack

*   **Frontend:** HTML5, CSS3, Vanilla JavaScript, Firebase JavaScript SDK (v8)
*   **Backend:** Firebase Firestore, Firebase Cloud Functions (Node.js 18)
*   **Hosting:** Firebase Hosting
*   **Authentication:** Firebase Authentication (Email/Password)

## Project Structure

```
Mood Weaver/
├── .firebaserc               # Firebase project alias configuration
├── firebase.json             # Firebase services configuration (Hosting, Functions, Firestore)
├── firestore.rules           # Firestore security rules
├── index.html                # Main HTML file for the application
├── script.js                 # Frontend JavaScript logic
├── style.css                 # CSS styles for the application
├── functions/                  # Directory for Firebase Cloud Functions
│   ├── index.js              # Main file for Cloud Function logic (sentiment analysis)
│   └── package.json          # Node.js dependencies for Cloud Functions
└── README.md                 # This file
```

## Core Features

1.  **User Authentication:** Sign up, login, and logout using Email/Password.
2.  **Journal Entry Creation:** Logged-in users can write and save journal entries.
3.  **Backend Sentiment Analysis:** A Cloud Function automatically calculates a mood score (positive/negative keyword count) for new entries.
4.  **Journal Display:** Logged-in users can view their past entries with mood scores, ordered newest first (real-time updates).

## Firebase Setup & Deployment

### Prerequisites

*   Node.js and npm installed.
*   Firebase CLI installed (`npm install -g firebase-tools`).
*   A Firebase project created on the [Firebase Console](https://console.firebase.google.com/).

### Initial Local Setup

1.  **Clone the repository (if applicable) or have the project files.**
2.  **Firebase Login:**
    ```bash
    firebase login
    ```
3.  **Configure Firebase Project:**
    *   Open `script.js` and replace the placeholder `firebaseConfig` object with your actual Firebase project's web app configuration details (apiKey, authDomain, projectId, etc.). You can find this in your Firebase project settings.
    *   Open `.firebaserc` and ensure the `default` project ID matches your Firebase Project ID.
4.  **Install Function Dependencies:**
    Navigate to the `functions` directory and install dependencies:
    ```bash
    cd functions
    npm install
    cd ..
    ```

### Running Locally (with Firebase Emulators - Recommended)

1.  **Initialize Emulators (if you haven't for this project before):**
    ```bash
    firebase init emulators
    ```
    Select Authentication, Firestore, and Functions emulators. Use default ports or configure as needed.
2.  **Start Emulators:**
    ```bash
    firebase emulators:start
    ```
    This will typically start:
    *   Authentication Emulator: `localhost:9099`
    *   Firestore Emulator: `localhost:8080`
    *   Functions Emulator: `localhost:5001`
    *   Hosting Emulator: `localhost:5000` (or another port)
    Open the Hosting Emulator URL in your browser to use the app.

### Deployment to Firebase

1.  **Deploy Hosting:**
    ```bash
    firebase deploy --only hosting
    ```
2.  **Deploy Firestore Rules:**
    ```bash
    firebase deploy --only firestore:rules
    ```
    (Alternatively, you can set these up via the Firebase Console)
3.  **Deploy Cloud Functions:**
    ```bash
    firebase deploy --only functions
    ```

    After deployment, your application will be accessible via the Firebase Hosting URL provided by the CLI.

## Firestore Data Structure

*   **Collection:** `users`
    *   **Document ID:** User's Firebase Authentication UID (e.g., `abc123xyz`)
        *   **Subcollection:** `entries`
            *   **Document ID:** Auto-generated by Firestore (e.g., `entryID_xyz789`)
                *   **Fields:**
                    *   `userId`: string (User's UID)
                    *   `content`: string (The journal entry text)
                    *   `timestamp`: Timestamp (Firestore server timestamp)
                    *   `moodScore`: number (Calculated by Cloud Function, initially null)

## Important Notes

*   **Firebase Configuration:** Ensure your `firebaseConfig` in `script.js` and project ID in `.firebaserc` are correctly set *before* deploying or running with emulators connected to your actual project.
*   **Security Rules:** The `firestore.rules` are essential for protecting user data. Review and understand them.
*   **Cloud Function Trigger:** The `calculateMoodScore` function in `functions/index.js` is triggered `onCreate` for new documents in `/users/{userId}/entries/{entryId}`.
*   **Sentiment Analysis:** The sentiment analysis is very basic (keyword counting) and intended as a simple example.

This `README.md` should give you a good starting point for understanding and managing the Mood Weaver project. 